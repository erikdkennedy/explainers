document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelectorAll(".toc a[href^='#']"),e=[];if(t.forEach(t=>{const r=(t.getAttribute("href")||"").trim();if(!r||"#"===r||!r.startsWith("#")||r.length<=1)return;const n=r.slice(1),o="#"+(window.CSS&&CSS.escape?CSS.escape(n):n.replace(/([!"#$%&'()*+,./:;<=>?@\[\]^`{|}~\s])/g,"\\$1"));let c;try{c=document.querySelector(o)}catch(t){return}c&&e.push(c)}),!e.length)return;const r=new IntersectionObserver(e=>{const r=e.filter(t=>t.isIntersecting);if(!r.length)return;const n=r.sort((t,e)=>t.boundingClientRect.top-e.boundingClientRect.top)[0];t.forEach(t=>{const e=(t.getAttribute("href")||"").trim(),r=e&&n.target.id&&e===`#${n.target.id}`;t.classList.toggle("active",!!r)})},{rootMargin:"0px 0px -70% 0px",threshold:.1});e.forEach(t=>r.observe(t))});