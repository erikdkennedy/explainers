(()=>{let e=0,t=null,n="rgb(255, 0, 0)",r=0,o=0;const a=c("#inverse-wavelength-slider"),i=c(".electron-cloud"),s=c(".photon-demo"),u=c(".photon-container"),l=c(".o2-molecule");function c(e){return document.querySelector(e)}function d(e,t,n){return Math.max(t,Math.min(n,e))}function f(e,t,n){const r=e.length-1,o=d(t,0,r*n),a=Math.floor(o/n);if(a>=r)return e[r];const i=a+1,s=(o-a*n)/n,u=e[a];return u+s*(e[i]-u)}function m(e,t,n){return 0===t?0:e/t*n}function h(e,t,n){const r=(r,o=(r+e/60)%6)=>n-n*t*Math.max(Math.min(o,4-o,1),0);return`rgb(${Math.round(255*r(5))}, ${Math.round(255*r(3))}, ${Math.round(255*r(1))})`}function p(){return e}function g(s){e=s,function(){const e=100-v()-y(),s=v(),l=y();o=s,r=l,c(".gauge__bar--scattered").setAttribute("data-percentage",s),c(".gauge__bar--absorbed").setAttribute("data-percentage",l),c(".gauge__bar--transmitted").setAttribute("data-percentage",e);const g=function(){const e=[400,500,600,750,1e3,1500],t=f(e,p(),100),n=e[e.length-1];return m(t,n,15)}(),b=m(v(),30,20);i.style.setProperty("--electron-cloud-amplitude",`${b}px`);const x=function(){if(!t&&i&&i.getAnimations){const e=i.getAnimations();if(e&&e.length){const n=e.find(e=>"animationName"in e&&"electronCloudVibrate"===e.animationName);t=n||e[0]}}return t}(),w=Math.max(.001,g);x.playbackRate=w,n=function(){const e=Number(a.min||0),t=Number(a.max||1),n=7*d((Number(a.value)-e)/(t-e),0,1),r=Math.min(6,Math.floor(n)),o=n-r;return r<5?h(60*(r+o),1,1):5===r?h(300,1,1-o):"rgb(0, 0, 0)"}(),u.style.color=n;for(let e=0;e<M.length;e++)M[e].el.style.backgroundColor=""}()}function v(){const e=[2,4,8,16,32,64];return m(f(e,p(),100),e[e.length-1],30)}function y(){const e=[0,0,0,0,5,500];return m(f(e,p(),100),e[e.length-1],60)}const b=[],M=[];let x=null,w=null,q=0,S=0,L=0,E=0;function N(){if(!s||!l)return;x=s.getBoundingClientRect(),w=l.getBoundingClientRect();const e=w.top+w.height/2;q=e-x.top;const t=w.left+w.width/2;S=t-x.left}function A(){const e=b.pop()||function(e,t){const n=document.createElement(e);return t&&(n.className=t),n}("div","photon");return e.style.setProperty("--photon-size","3px"),e.parentNode!==u&&u.appendChild(e),e}function $(e){e&&e.parentNode===u&&u.removeChild(e),b.push(e)}function C(){if(!u||!x)return;const e=A(),t=q+(n=-25,r=25,Math.random()*(r-n)+n);var n,r;const o={el:e,x:-1.5,y:t,vx:220,vy:0};M.push(o),e.style.transform=`translate3d(${Math.round(-3)}px, ${Math.round(t-1.5)}px, 0)`}function R(e){const t=1.5,n=e.x-t,r=e.x+t,o=e.y-t,a=e.y+t;return r<0||n>x.width||a<0||o>x.height}function P(e){L||(L=e);const t=Math.min(.05,(e-L)/1e3);L=e,x||N(),E+=120*t;let n=0|E;if(n>0)for(E-=n;n--;)C();for(let e=M.length-1;e>=0;e--){const n=M[e],a=n.x;n.x+=n.vx*t,n.y+=n.vy*t;const i=1.5;if(n.el.style.transform=`translate3d(${Math.round(n.x-i)}px, ${Math.round(n.y-i)}px, 0)`,!n.fateResolved&&a<S&&n.x>=S){const t=Math.random(),a=r/100,i=o/100;if(t<a){$(n.el),M.splice(e,1);continue}if(t<a+i){const e=Math.random()*Math.PI*2,t=220;n.vx=Math.cos(e)*t,n.vy=Math.sin(e)*t,n.fateResolved=!0}else n.fateResolved=!0}R(n)&&($(n.el),M.splice(e,1))}requestAnimationFrame(P)}function V(){if(!u||!s||!l)return;N(),L=performance.now(),requestAnimationFrame(P);const e="ResizeObserver"in window?new ResizeObserver(()=>N()):null;e?(e.observe(s),e.observe(l)):window.addEventListener("resize",N,{passive:!0})}function j(){g(Number(a.value))}function _(e){const t=e.querySelector(".red-slider"),n=e.querySelector(".green-slider"),r=e.querySelector(".blue-slider"),o=`rgb(${Number(t.value)}, ${Number(n.value)}, ${Number(r.value)})`;e.querySelector(".output-color-swatch").style.backgroundColor=o,function(e){e.querySelector(".reset-color-adjuster").classList.remove("visually-hidden")}(e)}function F(e){const t=e.target.closest(".color-adjuster-widget"),n=t.querySelector(".red-slider"),r=t.querySelector(".green-slider"),o=t.querySelector(".blue-slider");n.value=n.dataset.initialValue,r.value=r.dataset.initialValue,o.value=o.dataset.initialValue,_(t),e.preventDefault()}a&&a.addEventListener("input",j,{passive:!0}),document.addEventListener("DOMContentLoaded",function(){j(),V(),document.querySelectorAll(".color-adjuster-widget").forEach(e=>{_(e),function(e){e.querySelector(".reset-color-adjuster").classList.add("visually-hidden")}(e)}),document.querySelectorAll(".color-adjuster-widget").forEach(e=>{const t=e.querySelector(".red-slider"),n=e.querySelector(".green-slider"),r=e.querySelector(".blue-slider"),o=e.querySelector(".reset-color-adjuster");t&&t.addEventListener("input",()=>_(e),{passive:!0}),n&&n.addEventListener("input",()=>_(e),{passive:!0}),r&&r.addEventListener("input",()=>_(e),{passive:!0}),o&&o.addEventListener("click",F)}),document.querySelectorAll(".image-blend-widget").forEach(e=>{const t=e.querySelector(".ir-opacity-slider");if(!t)return;const n=()=>{const n=Math.max(0,Math.min(100,Number(t.value||0)));e.style.setProperty("--ir-opacity",String(n/100))};n(),t.addEventListener("input",n,{passive:!0})}),function(){const e=document.querySelectorAll(".inline-svg-diagram");if(!e||!e.length)return;const t="matchMedia"in window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;e.forEach(e=>{if(t)return void e.classList.remove("is-running");const n=()=>{const t=getComputedStyle(e),r=Math.max(1e-6,parseFloat(t.getPropertyValue("--light-speed"))||200),o=parseFloat(t.getPropertyValue("--pause-before-blue"))||0,a=parseFloat(t.getPropertyValue("--pause-after-blue"))||0,i=300/r,s=300/r,u=Math.max(0,1e3*(i+o+s+a));e.classList.add("is-running"),window.setTimeout(()=>{e.classList.remove("is-running"),e.offsetWidth,window.setTimeout(()=>n(),50)},u)};n()})}()},{once:!0})})();